{"uid":"7d358d1fc8ab7594","name":"图片编辑页裁剪比例可调整校验","fullName":"aircases.test_note_template.air.test_note_template#test_note_template_cropping","historyId":"abf68ce62bdfe170939c19620e3b23bc","time":{"start":1750993573504,"stop":1750993632333,"duration":58829},"description":"图片编辑页裁剪比例可调整校验","descriptionHtml":"<p>图片编辑页裁剪比例可调整校验</p>\n","status":"broken","statusMessage":"poco.exceptions.PocoNoSuchNodeException: Cannot find any visible node by query UIObjectProxy of \"text=确认\"","statusTrace":"proxy = UIObjectProxy of \"text=确认\", args = (), kwargs = {}\n\n    @wraps(func)\n    def wrapped(proxy, *args, **kwargs):\n        try:\n            return func(proxy, *args, **kwargs)\n        except PocoNoSuchNodeException as e:\n            try:\n>               proxy.wait_for_appearance(timeout=proxy.poco._pre_action_wait_for_appearance)\n\n.venv\\Lib\\site-packages\\poco\\proxy.py:26: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = UIObjectProxy of \"text=确认\", timeout = 6\n\n    def wait_for_appearance(self, timeout=120):\n        \"\"\"\n        Block and wait until the UI element **appears** within the given timeout. When timeout, the\n        :py:class:`PocoTargetTimeout <poco.exceptions.PocoTargetTimeout>` is raised.\n    \n        Args:\n            timeout: maximum waiting time in seconds\n    \n        Raises:\n            PocoTargetTimeout: when timeout\n        \"\"\"\n    \n        start = time.time()\n        while not self.exists():\n            self.poco.sleep_for_polling_interval()\n            if time.time() - start > timeout:\n>               raise PocoTargetTimeout('appearance', self)\nE               poco.exceptions.PocoTargetTimeout: Waiting timeout for appearance of \"UIObjectProxy of \"text=确认\"\"\n\n.venv\\Lib\\site-packages\\poco\\proxy.py:679: PocoTargetTimeout\n\nDuring handling of the above exception, another exception occurred:\n\n    @pytest.mark.testcase\n    @allure.description(\"图片编辑页裁剪比例可调整校验\")\n    @allure.title(\"图片编辑页裁剪比例可调整校验\")\n    def test_note_template_cropping():\n        if is_login()==True:\n            login()\n        poco(\"笔记\").click()\n        sleep(1)\n        #新建笔记\n        poco(text=\"新建笔记\").click()\n        sleep(1)\n        poco(\"更多设置\").click()\n        poco(text=\"更改模板\").click()\n        #点击自定义模板\n        poco(text=\"自定义模板\").click()\n        sleep(1)\n        poco(\"android.widget.LinearLayout\")\\\n        .offspring(\"androidx.compose.ui.platform.ComposeView\")\\\n        .child(\"android.view.View\")\\\n        .child(\"android.view.View\")\\\n        .child(\"android.view.View\")[7]\\\n        .child(\"android.view.View\").child(\"android.view.View\").click()\n        sleep(2)\n        #点击根目录\n        poco(\"显示根目录\").click()\n        sleep(1)\n        #点击图片\n        touch((168,324))\n        sleep(1)\n        poco(text=\"导出文件\").click()\n        png_list = poco(\"android.widget.FrameLayout\")\\\n        .child(\"android.widget.LinearLayout\")\\\n        .offspring(\"com.android.documentsui:id/drawer_layout\")\\\n        .child(\"android.widget.ScrollView\")\\\n        .offspring(\"com.android.documentsui:id/container_directory\")\\\n        .offspring(\"com.android.documentsui:id/dir_list\")\\\n        .child(\"com.android.documentsui:id/item_root\")\n        if png_list and len(png_list)>0:\n            for p in png_list:\n                if p.child(\"android.widget.LinearLayout\")\\\n                .child(\"android.widget.LinearLayout\")\\\n                .offspring(\"android:id/title\").get_text().endswith(\"png\"):\n                    p.click()\n                    break\n            #拖动进行裁切\n    #         touch((653,817))\n            swipe_press_ai((1109,1745),(507,1057))\n    #         swipe((1106,1745),(807,1257))\n            poco(\"应用裁切\").click()\n    \n        else:\n            #右滑返回\n            swipe((3,900),(200,900))\n            sleep(1)\n            #右滑返回\n            swipe((3,900),(200,900))\n        poco(text=\"确认\").click()\n        poco(\"返回\").click()\n        #删除笔记\n        touch(Template(r\"tpl1748339487185.png\", record_pos=(0.458, -0.484), resolution=(1200, 1920)))\n        poco(text=\"删除\").click()\n        sleep(1)\n>       poco(text=\"确认\").click()\n\naircases\\test_note_template.air\\test_note_template.py:421: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv\\Lib\\site-packages\\poco\\proxy.py:29: in wrapped\n    raise e\n.venv\\Lib\\site-packages\\poco\\proxy.py:23: in wrapped\n    return func(proxy, *args, **kwargs)\n.venv\\Lib\\site-packages\\poco\\proxy.py:332: in click\n    pos_in_percentage = self.get_position(focus)\n.venv\\Lib\\site-packages\\poco\\proxy.py:72: in wrapped\n    return func(proxy, *args, **kwargs)\n.venv\\Lib\\site-packages\\poco\\proxy.py:613: in get_position\n    x, y = map(float, self.attr('pos'))\n.venv\\Lib\\site-packages\\poco\\proxy.py:39: in wrapped\n    return func(self, *args, **kwargs)\n.venv\\Lib\\site-packages\\poco\\proxy.py:734: in attr\n    nodes = self._do_query(multiple=False)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = UIObjectProxy of \"text=确认\", multiple = False, refresh = False\n\n    def _do_query(self, multiple=True, refresh=False):\n        if not self._evaluated or refresh:\n            self._nodes = self.poco.agent.hierarchy.select(self.query, multiple)\n            if not self._nodes or len(self._nodes) == 0:\n                # 找不到节点时，将当前节点状态重置，强制下一次访问时重新查询一次节点信息\n                self.invalidate()\n>               raise PocoNoSuchNodeException(self)\nE               poco.exceptions.PocoNoSuchNodeException: Cannot find any visible node by query UIObjectProxy of \"text=确认\"\n\n.venv\\Lib\\site-packages\\poco\\proxy.py:888: PocoNoSuchNodeException","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"图片编辑页裁剪比例可调整校验","status":"broken","statusMessage":"poco.exceptions.PocoNoSuchNodeException: Cannot find any visible node by query UIObjectProxy of \"text=确认\"","statusTrace":"proxy = UIObjectProxy of \"text=确认\", args = (), kwargs = {}\n\n    @wraps(func)\n    def wrapped(proxy, *args, **kwargs):\n        try:\n            return func(proxy, *args, **kwargs)\n        except PocoNoSuchNodeException as e:\n            try:\n>               proxy.wait_for_appearance(timeout=proxy.poco._pre_action_wait_for_appearance)\n\n.venv\\Lib\\site-packages\\poco\\proxy.py:26: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = UIObjectProxy of \"text=确认\", timeout = 6\n\n    def wait_for_appearance(self, timeout=120):\n        \"\"\"\n        Block and wait until the UI element **appears** within the given timeout. When timeout, the\n        :py:class:`PocoTargetTimeout <poco.exceptions.PocoTargetTimeout>` is raised.\n    \n        Args:\n            timeout: maximum waiting time in seconds\n    \n        Raises:\n            PocoTargetTimeout: when timeout\n        \"\"\"\n    \n        start = time.time()\n        while not self.exists():\n            self.poco.sleep_for_polling_interval()\n            if time.time() - start > timeout:\n>               raise PocoTargetTimeout('appearance', self)\nE               poco.exceptions.PocoTargetTimeout: Waiting timeout for appearance of \"UIObjectProxy of \"text=确认\"\"\n\n.venv\\Lib\\site-packages\\poco\\proxy.py:679: PocoTargetTimeout\n\nDuring handling of the above exception, another exception occurred:\n\n    @pytest.mark.testcase\n    @allure.description(\"图片编辑页裁剪比例可调整校验\")\n    @allure.title(\"图片编辑页裁剪比例可调整校验\")\n    def test_note_template_cropping():\n        if is_login()==True:\n            login()\n        poco(\"笔记\").click()\n        sleep(1)\n        #新建笔记\n        poco(text=\"新建笔记\").click()\n        sleep(1)\n        poco(\"更多设置\").click()\n        poco(text=\"更改模板\").click()\n        #点击自定义模板\n        poco(text=\"自定义模板\").click()\n        sleep(1)\n        poco(\"android.widget.LinearLayout\")\\\n        .offspring(\"androidx.compose.ui.platform.ComposeView\")\\\n        .child(\"android.view.View\")\\\n        .child(\"android.view.View\")\\\n        .child(\"android.view.View\")[7]\\\n        .child(\"android.view.View\").child(\"android.view.View\").click()\n        sleep(2)\n        #点击根目录\n        poco(\"显示根目录\").click()\n        sleep(1)\n        #点击图片\n        touch((168,324))\n        sleep(1)\n        poco(text=\"导出文件\").click()\n        png_list = poco(\"android.widget.FrameLayout\")\\\n        .child(\"android.widget.LinearLayout\")\\\n        .offspring(\"com.android.documentsui:id/drawer_layout\")\\\n        .child(\"android.widget.ScrollView\")\\\n        .offspring(\"com.android.documentsui:id/container_directory\")\\\n        .offspring(\"com.android.documentsui:id/dir_list\")\\\n        .child(\"com.android.documentsui:id/item_root\")\n        if png_list and len(png_list)>0:\n            for p in png_list:\n                if p.child(\"android.widget.LinearLayout\")\\\n                .child(\"android.widget.LinearLayout\")\\\n                .offspring(\"android:id/title\").get_text().endswith(\"png\"):\n                    p.click()\n                    break\n            #拖动进行裁切\n    #         touch((653,817))\n            swipe_press_ai((1109,1745),(507,1057))\n    #         swipe((1106,1745),(807,1257))\n            poco(\"应用裁切\").click()\n    \n        else:\n            #右滑返回\n            swipe((3,900),(200,900))\n            sleep(1)\n            #右滑返回\n            swipe((3,900),(200,900))\n        poco(text=\"确认\").click()\n        poco(\"返回\").click()\n        #删除笔记\n        touch(Template(r\"tpl1748339487185.png\", record_pos=(0.458, -0.484), resolution=(1200, 1920)))\n        poco(text=\"删除\").click()\n        sleep(1)\n>       poco(text=\"确认\").click()\n\naircases\\test_note_template.air\\test_note_template.py:421: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv\\Lib\\site-packages\\poco\\proxy.py:29: in wrapped\n    raise e\n.venv\\Lib\\site-packages\\poco\\proxy.py:23: in wrapped\n    return func(proxy, *args, **kwargs)\n.venv\\Lib\\site-packages\\poco\\proxy.py:332: in click\n    pos_in_percentage = self.get_position(focus)\n.venv\\Lib\\site-packages\\poco\\proxy.py:72: in wrapped\n    return func(proxy, *args, **kwargs)\n.venv\\Lib\\site-packages\\poco\\proxy.py:613: in get_position\n    x, y = map(float, self.attr('pos'))\n.venv\\Lib\\site-packages\\poco\\proxy.py:39: in wrapped\n    return func(self, *args, **kwargs)\n.venv\\Lib\\site-packages\\poco\\proxy.py:734: in attr\n    nodes = self._do_query(multiple=False)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = UIObjectProxy of \"text=确认\", multiple = False, refresh = False\n\n    def _do_query(self, multiple=True, refresh=False):\n        if not self._evaluated or refresh:\n            self._nodes = self.poco.agent.hierarchy.select(self.query, multiple)\n            if not self._nodes or len(self._nodes) == 0:\n                # 找不到节点时，将当前节点状态重置，强制下一次访问时重新查询一次节点信息\n                self.invalidate()\n>               raise PocoNoSuchNodeException(self)\nE               poco.exceptions.PocoNoSuchNodeException: Cannot find any visible node by query UIObjectProxy of \"text=确认\"\n\n.venv\\Lib\\site-packages\\poco\\proxy.py:888: PocoNoSuchNodeException","steps":[],"attachments":[{"uid":"48ad6834914e1f85","name":"log","source":"48ad6834914e1f85.txt","type":"text/plain","size":1770}],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true,"attachmentStep":false,"stepsCount":0},"afterStages":[],"labels":[{"name":"feature","value":"笔记模板模块用例"},{"name":"epic","value":"办公本v2.4.0"},{"name":"tag","value":"testcase"},{"name":"parentSuite","value":"aircases.test_note_template.air"},{"name":"suite","value":"test_note_template"},{"name":"host","value":"DESKTOP-P9LT7L8"},{"name":"thread","value":"8036-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"aircases.test_note_template.air.test_note_template"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[]}],"tags":["testcase"]},"source":"7d358d1fc8ab7594.json","parameterValues":[]}